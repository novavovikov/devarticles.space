---
cover: cover.webp
date: 2020-12-20
title: –°—Ç–∞–Ω–¥–∞—Ä—Ç ES2021
description: –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ ES12 - –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞
tags:
  - javascript
---

–ù–∏–∂–µ —è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—é —Å–ø–∏—Å–æ–∫ —Ç–µ—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç–∏–≥–ª–∏ —Å—Ç–∞–¥–∏–∏ 4 –∏ [–∫–æ–º–∏—Ç–µ—Ç TC39](https://tc39.es) –≤–∫–ª—é—á–∏–ª
–≤ [–ø–æ—Å–ª–µ–¥–Ω–∏–π —á–µ—Ä–Ω–æ–≤–∏–∫](https://tc39.es/ecma262) —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ
–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ GitHub](https://github.com/tc39/proposals/blob/master/finished-proposals.md) –∫–æ–º–∏—Ç–µ—Ç–∞ TC39

## String.replaceAll

`String.replaceAll()` –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ –¥—Ä—É–≥–∏–º —Å—Ç—Ä–æ–∫–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.

–î–æ —Å–∏—Ö –ø–æ—Ä –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–º–µ–Ω—ã —Å–∏–º–≤–æ–ª–∞ "+" –Ω–∞ –ø—Ä–æ–±–µ–ª:

```javascript
const fullname = 'fullname=John+Hannibal+Smith';
const fullnameFormated = fullname.replace(/\+/g, ' ');

console.log(fullnameFormated) // John Hannibal Smith
```

–í –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–ø—Ä–æ—Å—Ç–æ –∏ –ø–æ—ç—Ç–æ–º—É —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –æ—à–∏–±–æ–∫.

–ï—Å—Ç—å –∫–æ–Ω–µ—á–Ω–æ –∏ –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫—É —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ `Array.split` –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –µ—ë
–æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `Array.join`:

```javascript
const fullname = 'fullname=John+Hannibal+Smith';
const fullnameFormated = fullname.split('+').join(' ');

console.log(fullnameFormated) // John Hannibal Smith
```

–≠—Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –º–∞—Å—Å–∏–≤ —á–∞—Å—Ç–µ–π –∏
–ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Ö —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è, —á—Ç–æ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.

[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ Mathias Bynens](https://github.com/tc39/proposal-string-replaceall) —Ä–µ—à–∞–µ—Ç —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏ –¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π
—Å–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –∑–∞–º–µ–Ω—É –ø–æ–¥—Å—Ç—Ä–æ–∫–∏:

```javascript
const fullname = 'fullname=Jhon+Hannibal+Smith';
const fullnameFormated = fullname.replaceAll('+', ' ');

console.log(fullnameFormated) // John Hannibal Smith
```

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ NodeJs, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 15.0.0. 
–ê —Ç–∞–∫–∂–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –±—Ä–∞—É–∑–µ—Ä–æ–≤ —É–∂–µ [—Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –µ–≥–æ](https://caniuse.com/mdn-javascript_builtins_string_replaceall).

üìå –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å —Ä–∞–Ω–µ–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–≤—à–∏–º–∏ API –Ω–∞
—è–∑—ã–∫–µ `String.replaceAll(searchValue, newvalue)` –≤–µ–¥–µ—Ç —Å–µ–±—è
–∫–∞–∫ `String.replace(searchValue, newvalue)` —Å –¥–≤—É–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏:

- –ï—Å–ª–∏ `searchValue` —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π, —Ç–æ `String.replaceAll` –∑–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è, –∞ `String.replace` –∑–∞–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ
  –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏.
- –ï—Å–ª–∏ `searchValue` - –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, `String.replace` –∑–∞–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.
  `String.replaceAll`, —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—É—Ç–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º
  –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞ –∏ –∏–º–µ–Ω–µ–º –≤—ã–∑—ã–≤–∞–µ–º–æ–≥–æ –º–µ—Ç–æ–¥–∞.

## Promise.any

`Promise.any()` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ª—é–±—ã–µ Promise –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (resolved), –∏–ª–∏ –≤—Å–µ –æ–Ω–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è (rejected).
–í —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –æ–Ω–∏ –≤—Å–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã (rejected) `Promise.any()` –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π `AggregateError`.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä:

```javascript
const promise1 = new Promise((resolve, reject) => {
  setTimeout(() => resolve("P1"), Math.floor(Math.random() * 100));
});

const promise2 = new Promise((resolve, reject) => {
  setTimeout(() => resolve("P2"), Math.floor(Math.random() * 100));
});

(async function() {
  const result = await Promise.any([promise1, promise2]);

  console.log(result); // P1 or P2
})();
```

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç –ª—é–±–æ–π –∏–∑ –ø–µ—Ä–≤—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö (resolved) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ `Promise.any()`.

–ú–Ω–æ–≥–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã —É–∂–µ [—Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏](https://caniuse.com/mdn-javascript_builtins_promise_any) 
–ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞. –í NodeJS –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 15.0.0.

üìå –ü–æ–º–Ω–∏—Ç–µ –æ —Ä–∞–∑–ª–∏—á–∏—è—Ö —Å `Promise.race()`, –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å—á–µ—Ç,
–∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫–æ–π-–ª–∏–±–æ –∏–∑ Promise, **–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** –æ—Ç —Ç–æ–≥–æ, –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –æ–Ω–∏ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã.

## WeakRefs

[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ Dean Tribble, Till Schneidereit, Sathya Gunasekaran](https://github.com/tc39/proposal-weakrefs)

–û–±—ä–µ–∫—Ç `WeakRef` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–ª–∞–±—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –¥—Ä—É–≥–æ–π –æ–±—ä–µ–∫—Ç, 
–Ω–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—è —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞ –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

**–°–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç** ‚Äî —ç—Ç–æ —Å—Å—ã–ª–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç —É–¥–∞–ª–µ–Ω–∏—é –æ–±—ä–µ–∫—Ç–∞ —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞.
–ù–∞–ø—Ä–æ—Ç–∏–≤, –æ–±—ã—á–Ω–∞—è (–∏–ª–∏ —Å–∏–ª—å–Ω–∞—è) —Å—Å—ã–ª–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏.
–ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –∏–º–µ–µ—Ç —Å–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –Ω–µ–≥–æ,
—Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –¥–≤–∏–∂–∫–∞ JavaScript –º–æ–∂–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –æ–±—ä–µ–∫—Ç –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –µ–≥–æ –ø–∞–º—è—Ç—å.
–ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –≤—ã –±–æ–ª—å—à–µ –Ω–µ —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç –∏–∑ —Å–ª–∞–±–æ–π —Å—Å—ã–ª–∫–∏.

–î–ª—è —á–µ–≥–æ –Ω–∞–º –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è WeakRefs?
–ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç Map –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–µ—à–∞ —Å–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π,
–∫–æ—Ç–æ—Ä—ã–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. 
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∞–º —É–¥–æ–±–Ω–æ –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å,
–∑–∞–Ω–∏–º–∞–µ–º—É—é –ø–∞—Ä–∞–º–∏ ¬´–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ¬ª, –∏ `WeakRefs` –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –≤ JavaScript –µ—Å—Ç—å WeakMap() –∏ WeakSet(), –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç WeakRefs.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä:
```javascript
const myObj = {...};
```

–§—É–Ω–∫—Ü–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–±—ä–µ–∫—Ç:
```javascript
function useTheObj(obj) {
   doSomethingWith(obj);
}
```

–Ø —Ö–æ—á—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –º–µ—Ç–æ–¥ –±—ã–ª –≤—ã–∑–≤–∞–Ω —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º,
–∏ —Å–æ–æ–±—â–∞—Ç—å, –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–æ–ª–µ–µ 1000 —Ä–∞–∑:

```javascript
let map = new Map();

function useTheObj(obj){
  doSomethingWith(obj);

  // –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ 0
  let called = map.get(obj) || 0;

  // –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏–º —Å—á—ë—Ç—á–∏–∫
  called++;

  if (called > 1000) {
    console.log("called more than 1000 times");
  };

  map.set(obj, called);
}
```

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —É –Ω–µ–≥–æ –µ—Å—Ç—å —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏,
–ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ `map`
–∏ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞. –†–µ—à–µ–Ω–∏–µ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WeakMap:

```javascript
let wmap = new WeakMap();

function useTheObj(obj){
  doSomethingWith(obj);
  // –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ 0
  let called = wmap.get(obj) || 0;


  // –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏–º —Å—á—ë—Ç—á–∏–∫
  called++;

  if (called > 1000) {
    console.log("called more than 1000 times");
  };

  wmap.set(obj, called);
}
```

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ WeakRefs –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö –ø–æ–∫–∞ —á—Ç–æ –¥–∞–ª–µ–∫–æ –Ω–µ [–≤–µ–∑–¥–µ](https://caniuse.com/?search=WeakRef),
–Ω–æ NodeJS –¥–æ—Å—Ç—É–ø–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 14.6.0.

üìå –ü–æ—Å–∫–æ–ª—å–∫—É —Å—Å—ã–ª–∫–∏ —Å–ª–∞–±—ã–µ, –∫–ª—é—á–∏ WeakMap –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å.

üìå `WeakSet` –ø–æ—Ö–æ–∂ –Ω–∞ `WeakMap`, –Ω–æ, –∫–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏,
–∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –≤ `WeakSet` –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.
–í—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `WeakSet` —É–Ω–∏–∫–∞–ª—å–Ω—ã.

üìå –°–æ–≥–ª–∞—Å–Ω–æ [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef#Avoid_where_possible)
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è `WeakRef` –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–±–µ–≥–∞—Ç—å –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## –û–ø–µ—Ä–∞—Ç–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è (Logical Assignment Operators)

[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è](https://github.com/tc39/proposal-logical-assignment)
(–î–∂–∞—Å—Ç–∏–Ω–∞ –†–∏–¥–∂—É—ç–ª–ª–∞ –∏ –•–µ–º–∞–Ω—Ç–∞ HM) –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (`&&,` `||`, `??`) –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è.

–î–æ —Å–∏—Ö –ø–æ—Ä –≤ JavaScript –±—ã–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è:

```javascript
= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
/= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –¥–µ–ª–µ–Ω–∏–µ–º
*= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å —É–º–Ω–æ–∂–µ–Ω–∏–µ–º
&&= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ò 
||= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ò–õ–ò 
??= // –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –Ω—É–ª–µ–≤–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
**= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ–º –≤ —Å—Ç–µ–ø–µ–Ω—å
%= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –ø–æ –º–æ–¥—É–ª—é
+= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å–æ —Å–ª–æ–∂–µ–Ω–∏–µ–º
-= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –≤—ã—á–∏—Ç–∞–Ω–∏–µ–º
<<= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ª–µ–≤—ã–º —Å–¥–≤–∏–≥–æ–º
>>= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ø—Ä–∞–≤—ã–º —Å–¥–≤–∏–≥–æ–º
>>>= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–º —Å–¥–≤–∏–≥–æ–º –≤–ø—Ä–∞–≤–æ
&= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ø–æ–±–∏—Ç–æ–≤—ã–º AND
^= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ø–æ–±–∏—Ç–æ–≤—ã–º XOR
|= // –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Å –ø–æ–±–∏—Ç–æ–≤—ã–º OR

/** –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É—é—â–µ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ: */
[a, b] = [10, 20]
{a, b} = {a: 10, b: 20}
```

–ò —Å —ç—Ç–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –º—ã –æ–±—ä–µ–¥–∏–Ω–∏–º –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è:
```javascript
a ||= b // –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: a || (a = b), –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ a - –ª–æ–∂–Ω–æ–µ
a &&= b // –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: a && (a = b), –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ a - –∏—Å—Ç–∏–Ω–∞
a ??= b // –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: a ?? (a = b), –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ a - null –∏–ª–∏ undefined
```

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –Ω–µ –≤—Å–µ [–±—Ä–∞—É–∑–µ—Ä—ã](https://caniuse.com/?search=Logical%20Assignment%20Operators)
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –í NodeJS –¥–æ—Å—Ç—É–ø–Ω–æ, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 15.0.0

## –ß–∏—Å–ª–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (Numeric separators)

–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ Christophe Porteneuve [—á–∏—Å–ª–æ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π](https://github.com/tc39/proposal-numeric-separator)
—Ä–∞—Å—à–∏—Ä—è—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π [NumericLiteral](https://tc39.es/ecma262/#prod-NumericLiteral),
–ø–æ–∑–≤–æ–ª—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É —Ü–∏—Ñ—Ä–∞–º–∏.

–ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å —á–∏—Å–ª–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –±–æ–ª–µ–µ —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º—ã–º–∏,
—Å–æ–∑–¥–∞–≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏ —Ü–∏—Ñ—Ä.

–ù–∞–ø—Ä–∏–º–µ—Ä —É –Ω–∞—Å –µ—Å—Ç—å –≤–æ—Ç —Ç–∞–∫–æ–π —á–∏—Å–ª–æ–≤–æ–π –ª–∏—Ç–µ—Ä–∞–ª:

```javascript
const money = 1000000000000;
```

–í—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—ã–π —á–∏—Å–ª–æ–≤–æ–π –ª–∏—Ç–µ—Ä–∞–ª —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å,
–Ω–æ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π,
—á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å —á—Ç–µ–Ω–∏–µ:

```javascript
const money = 1_000_000_000_000;
```

–¢–µ–ø–µ—Ä—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `money` —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ–π.

–ß–∏—Å–ª–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–∫–∂–µ –∏ –¥–ª—è —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π:

```javascript
const money = 1_000_000.123_456;
```

**Numeric separators** —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ [–±—Ä–∞—É–∑–µ—Ä–æ–≤](https://caniuse.com/mdn-javascript_grammar_numeric_separators)
–∏ –≤ NodeJs, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 12.5.0.
 

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

JavaScript –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.
–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤,
–∫–æ—Ç–æ—Ä—ã–µ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –±—É–¥—É—Ç –≤–∫–ª—é—á–µ–Ω—ã –≤ JavaScript ES2021 (ES12).

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–æ—á–∏—Ç–∞–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞. –ï—Å–ª–∏ –∂–µ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, 
—á—Ç–æ –≤–æ—à–ª–æ –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é ES2020, —Ç–æ –º–æ–∂–µ—Ç –ø–æ—á–∏—Ç–∞—Ç—å [–≤–æ—Ç —ç—Ç—É —Å—Ç–∞—Ç—å—é](/articles/es-2020).
